<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üöÄ Two-Pointer Technique - One Pass Visualization</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #0a0a0f;
        --bg-secondary: #12121a;
        --bg-card: #1a1a2e;
        --bg-code: #0d0d14;
        --accent-slow: #00fff5;
        --accent-fast: #ff006e;
        --accent-both: #8338ec;
        --accent-yellow: #ffbe0b;
        --accent-green: #06d6a0;
        --accent-orange: #fb5607;
        --accent-blue: #3a86ff;
        --text-primary: #ffffff;
        --text-secondary: #8888a0;
        --node-default: #2a2a4a;
        --node-dummy: #4a4a6a;
        --arrow-color: #4a4a6a;
        --gap-color: rgba(131, 56, 236, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Fredoka", sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Animated gradient background */
      .bg-gradient {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            ellipse at 0% 0%,
            rgba(0, 255, 245, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            ellipse at 100% 0%,
            rgba(255, 0, 110, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            ellipse at 50% 100%,
            rgba(131, 56, 236, 0.1) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 0;
      }

      /* Floating particles */
      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 0;
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: var(--accent-slow);
        border-radius: 50%;
        animation: float 15s infinite;
        opacity: 0.3;
      }

      .particle:nth-child(2) {
        left: 20%;
        animation-delay: -2s;
        background: var(--accent-fast);
      }
      .particle:nth-child(3) {
        left: 40%;
        animation-delay: -4s;
        background: var(--accent-both);
      }
      .particle:nth-child(4) {
        left: 60%;
        animation-delay: -6s;
        background: var(--accent-yellow);
      }
      .particle:nth-child(5) {
        left: 80%;
        animation-delay: -8s;
        background: var(--accent-green);
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 0.3;
        }
        90% {
          opacity: 0.3;
        }
        100% {
          transform: translateY(-100vh) rotate(720deg);
          opacity: 0;
        }
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1300px;
        margin: 0 auto;
        padding: 1.5rem;
      }

      /* Header */
      header {
        text-align: center;
        margin-bottom: 1.5rem;
        animation: slideDown 0.8s ease-out;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-40px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .logo {
        font-size: 3rem;
        margin-bottom: 0.5rem;
        animation: logoSpin 3s ease-in-out infinite;
      }

      @keyframes logoSpin {
        0%,
        100% {
          transform: rotate(-5deg) scale(1);
        }
        50% {
          transform: rotate(5deg) scale(1.1);
        }
      }

      h1 {
        font-size: 2.2rem;
        font-weight: 700;
        background: linear-gradient(
          135deg,
          var(--accent-slow) 0%,
          var(--accent-both) 50%,
          var(--accent-fast) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.3rem;
      }

      .subtitle {
        font-size: 1.1rem;
        color: var(--text-secondary);
      }

      .badges {
        display: flex;
        justify-content: center;
        gap: 0.8rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }

      .badge {
        padding: 0.4rem 1rem;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 600;
        border: 2px solid;
      }

      .badge-slow {
        background: rgba(0, 255, 245, 0.1);
        border-color: var(--accent-slow);
        color: var(--accent-slow);
      }

      .badge-fast {
        background: rgba(255, 0, 110, 0.1);
        border-color: var(--accent-fast);
        color: var(--accent-fast);
      }

      .badge-optimal {
        background: linear-gradient(
          135deg,
          var(--accent-green),
          var(--accent-blue)
        );
        border: none;
        color: white;
      }

      /* Problem card */
      .problem-card {
        background: linear-gradient(
          135deg,
          var(--bg-card),
          var(--bg-secondary)
        );
        border-radius: 20px;
        padding: 1.2rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        animation: fadeIn 0.6s ease-out 0.2s both;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .info-box {
        text-align: center;
        padding: 0.8rem;
        background: var(--bg-primary);
        border-radius: 12px;
      }

      .info-label {
        font-size: 0.7rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 0.3rem;
      }

      .info-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.1rem;
        font-weight: 600;
      }

      .info-value.cyan {
        color: var(--accent-slow);
      }
      .info-value.pink {
        color: var(--accent-fast);
      }
      .info-value.yellow {
        color: var(--accent-yellow);
      }
      .info-value.green {
        color: var(--accent-green);
      }

      /* Main visualization */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 380px;
        gap: 1.5rem;
        animation: fadeIn 0.6s ease-out 0.4s both;
      }

      @media (max-width: 1100px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      .visualization-panel {
        background: var(--bg-card);
        border-radius: 24px;
        padding: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      /* Phase tabs */
      .phase-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .phase-tab {
        flex: 1;
        min-width: 120px;
        padding: 0.7rem 0.5rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
        text-align: center;
        background: var(--bg-secondary);
        color: var(--text-secondary);
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .phase-tab.active {
        background: linear-gradient(
          135deg,
          var(--accent-both),
          var(--accent-fast)
        );
        color: white;
        border-color: rgba(255, 255, 255, 0.2);
        box-shadow: 0 4px 20px rgba(131, 56, 236, 0.4);
        transform: translateY(-2px);
      }

      .phase-tab.completed {
        background: var(--accent-green);
        color: var(--bg-primary);
      }

      .phase-tab-icon {
        display: block;
        font-size: 1.2rem;
        margin-bottom: 0.2rem;
      }

      /* Linked list visualization */
      .list-container {
        position: relative;
        padding: 4rem 1rem 3rem;
        overflow-x: auto;
        min-height: 200px;
      }

      .list-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0;
      }

      /* Gap indicator */
      .gap-indicator {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--gap-color);
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--accent-both);
        border: 2px solid var(--accent-both);
        opacity: 0;
        transition: all 0.4s ease;
      }

      .gap-indicator.visible {
        opacity: 1;
      }

      .node-group {
        display: flex;
        align-items: center;
        position: relative;
      }

      .node {
        width: 65px;
        height: 65px;
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: "JetBrains Mono", monospace;
        font-size: 1.4rem;
        font-weight: 700;
        position: relative;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        border: 3px solid transparent;
        background: var(--node-default);
      }

      .node.dummy {
        background: var(--node-dummy);
        border-style: dashed;
        border-color: var(--text-secondary);
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .node.slow-only {
        background: linear-gradient(135deg, var(--accent-slow), #00b4d8);
        border-color: var(--accent-slow);
        box-shadow: 0 0 30px rgba(0, 255, 245, 0.4),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
        color: var(--bg-primary);
        transform: scale(1.1);
      }

      .node.fast-only {
        background: linear-gradient(
          135deg,
          var(--accent-fast),
          var(--accent-orange)
        );
        border-color: var(--accent-fast);
        box-shadow: 0 0 30px rgba(255, 0, 110, 0.4),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
        color: white;
        transform: scale(1.1);
      }

      .node.both-pointers {
        background: linear-gradient(
          135deg,
          var(--accent-slow),
          var(--accent-both),
          var(--accent-fast)
        );
        border-color: var(--accent-both);
        box-shadow: 0 0 40px rgba(131, 56, 236, 0.5),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
        color: white;
        transform: scale(1.15);
        animation: bothPulse 1.5s ease-in-out infinite;
      }

      @keyframes bothPulse {
        0%,
        100% {
          box-shadow: 0 0 40px rgba(131, 56, 236, 0.5);
        }
        50% {
          box-shadow: 0 0 60px rgba(131, 56, 236, 0.8);
        }
      }

      .node.target {
        background: linear-gradient(
          135deg,
          var(--accent-yellow),
          var(--accent-orange)
        );
        border-color: var(--accent-yellow);
        box-shadow: 0 0 25px rgba(255, 190, 11, 0.5);
        color: var(--bg-primary);
        animation: targetGlow 1s ease-in-out infinite;
      }

      @keyframes targetGlow {
        0%,
        100% {
          box-shadow: 0 0 25px rgba(255, 190, 11, 0.5);
        }
        50% {
          box-shadow: 0 0 40px rgba(255, 190, 11, 0.8);
        }
      }

      .node.removed {
        opacity: 0.3;
        transform: scale(0.8) translateY(20px);
        border: 3px dashed var(--accent-fast);
        background: rgba(255, 0, 110, 0.1);
      }

      .node-index {
        position: absolute;
        top: -22px;
        font-size: 0.65rem;
        color: var(--text-secondary);
        background: var(--bg-secondary);
        padding: 2px 8px;
        border-radius: 8px;
      }

      /* Pointer labels */
      .pointer-labels {
        position: absolute;
        bottom: -35px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 0.3rem;
        white-space: nowrap;
      }

      .pointer-label {
        font-size: 0.65rem;
        font-weight: 600;
        padding: 3px 8px;
        border-radius: 6px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .pointer-label.slow {
        background: var(--accent-slow);
        color: var(--bg-primary);
      }

      .pointer-label.fast {
        background: var(--accent-fast);
        color: white;
      }

      .pointer-label.target {
        background: var(--accent-yellow);
        color: var(--bg-primary);
      }

      /* Arrows */
      .arrow {
        width: 40px;
        height: 4px;
        background: var(--arrow-color);
        position: relative;
        transition: all 0.3s ease;
      }

      .arrow::after {
        content: "";
        position: absolute;
        right: -1px;
        top: 50%;
        transform: translateY(-50%);
        border: 5px solid transparent;
        border-left-color: var(--arrow-color);
      }

      .arrow.skip {
        background: var(--accent-green);
        height: 5px;
        animation: skipPulse 0.5s ease-in-out infinite;
      }

      .arrow.skip::after {
        border-left-color: var(--accent-green);
      }

      @keyframes skipPulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      .null-node {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.9rem;
        color: var(--text-secondary);
        padding: 0.5rem 0.8rem;
        background: var(--bg-secondary);
        border-radius: 8px;
        border: 2px dashed var(--text-secondary);
      }

      /* Step info */
      .step-info {
        background: var(--bg-secondary);
        border-radius: 16px;
        padding: 1.2rem;
        margin-top: 1.5rem;
      }

      .step-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.8rem;
      }

      .step-badge {
        font-size: 0.8rem;
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        background: var(--accent-both);
        color: white;
      }

      .step-counter {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        color: var(--text-secondary);
      }

      .step-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .step-description {
        color: var(--text-secondary);
        font-size: 0.95rem;
        line-height: 1.6;
      }

      .step-description code {
        background: var(--bg-primary);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: "JetBrains Mono", monospace;
        color: var(--accent-slow);
      }

      /* Variables grid */
      .variables-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0.8rem;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .var-box {
        background: var(--bg-primary);
        padding: 0.8rem;
        border-radius: 10px;
        text-align: center;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .var-box.highlight-slow {
        border-color: var(--accent-slow);
        box-shadow: 0 0 15px rgba(0, 255, 245, 0.3);
      }

      .var-box.highlight-fast {
        border-color: var(--accent-fast);
        box-shadow: 0 0 15px rgba(255, 0, 110, 0.3);
      }

      .var-name {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.7rem;
        color: var(--text-secondary);
        margin-bottom: 0.2rem;
      }

      .var-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.1rem;
        font-weight: 600;
      }

      .var-value.slow {
        color: var(--accent-slow);
      }
      .var-value.fast {
        color: var(--accent-fast);
      }
      .var-value.yellow {
        color: var(--accent-yellow);
      }
      .var-value.green {
        color: var(--accent-green);
      }

      /* Controls */
      .controls {
        display: flex;
        gap: 0.8rem;
        margin-top: 1.2rem;
        flex-wrap: wrap;
      }

      .btn {
        flex: 1;
        min-width: 100px;
        padding: 0.8rem 1rem;
        border: none;
        border-radius: 12px;
        font-family: "Fredoka", sans-serif;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.4rem;
      }

      .btn-prev {
        background: var(--bg-secondary);
        color: var(--accent-slow);
        border: 2px solid var(--accent-slow);
      }

      .btn-next {
        background: linear-gradient(
          135deg,
          var(--accent-slow),
          var(--accent-green)
        );
        color: var(--bg-primary);
      }

      .btn-auto {
        background: linear-gradient(
          135deg,
          var(--accent-both),
          var(--accent-fast)
        );
        color: white;
      }

      .btn-reset {
        background: var(--bg-secondary);
        color: var(--accent-fast);
        border: 2px solid var(--accent-fast);
      }

      .btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      /* Progress */
      .progress-bar {
        margin-top: 1rem;
        height: 6px;
        background: var(--bg-primary);
        border-radius: 10px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--accent-slow),
          var(--accent-both),
          var(--accent-fast)
        );
        border-radius: 10px;
        transition: width 0.4s ease;
      }

      /* Side panel - Code */
      .side-panel {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .code-panel {
        background: var(--bg-card);
        border-radius: 20px;
        padding: 1.2rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
        flex: 1;
      }

      .panel-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        font-weight: 600;
        color: var(--accent-green);
      }

      .code-block {
        background: var(--bg-code);
        border-radius: 12px;
        padding: 1rem;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.75rem;
        line-height: 1.7;
        overflow-x: auto;
        max-height: 400px;
        overflow-y: auto;
      }

      .code-line {
        padding: 2px 8px;
        border-radius: 4px;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(0, 255, 245, 0.15);
        border-left: 3px solid var(--accent-slow);
      }

      .code-line.active-fast {
        background: rgba(255, 0, 110, 0.15);
        border-left: 3px solid var(--accent-fast);
      }

      .code-comment {
        color: #6a9955;
      }
      .code-keyword {
        color: var(--accent-fast);
      }
      .code-variable {
        color: var(--accent-slow);
      }
      .code-number {
        color: var(--accent-yellow);
      }
      .code-function {
        color: var(--accent-blue);
      }

      /* Legend panel */
      .legend-panel {
        background: var(--bg-card);
        border-radius: 16px;
        padding: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .legend-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.6rem;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.75rem;
        color: var(--text-secondary);
      }

      .legend-dot {
        width: 16px;
        height: 16px;
        border-radius: 5px;
        flex-shrink: 0;
      }

      .legend-dot.slow {
        background: linear-gradient(135deg, var(--accent-slow), #00b4d8);
      }
      .legend-dot.fast {
        background: linear-gradient(
          135deg,
          var(--accent-fast),
          var(--accent-orange)
        );
      }
      .legend-dot.both {
        background: linear-gradient(
          135deg,
          var(--accent-slow),
          var(--accent-both),
          var(--accent-fast)
        );
      }
      .legend-dot.target {
        background: linear-gradient(
          135deg,
          var(--accent-yellow),
          var(--accent-orange)
        );
      }
      .legend-dot.dummy {
        background: var(--node-dummy);
        border: 2px dashed var(--text-secondary);
      }

      /* Completion */
      .completion-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
      }

      .completion-overlay.visible {
        opacity: 1;
        pointer-events: all;
      }

      .completion-card {
        background: var(--bg-card);
        border-radius: 24px;
        padding: 2.5rem;
        text-align: center;
        max-width: 500px;
        transform: scale(0.8);
        transition: transform 0.4s ease;
        border: 2px solid var(--accent-green);
        box-shadow: 0 0 60px rgba(6, 214, 160, 0.3);
      }

      .completion-overlay.visible .completion-card {
        transform: scale(1);
      }

      .completion-emoji {
        font-size: 4rem;
        animation: celebrateBounce 0.6s ease-in-out infinite;
      }

      @keyframes celebrateBounce {
        0%,
        100% {
          transform: translateY(0) rotate(-5deg);
        }
        50% {
          transform: translateY(-15px) rotate(5deg);
        }
      }

      .completion-title {
        font-size: 1.8rem;
        font-weight: 700;
        margin: 1rem 0;
        background: linear-gradient(
          135deg,
          var(--accent-green),
          var(--accent-slow)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .completion-stats {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin: 1.5rem 0;
      }

      .stat {
        text-align: center;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-slow);
      }

      .stat-label {
        font-size: 0.8rem;
        color: var(--text-secondary);
      }

      .completion-close {
        margin-top: 1.5rem;
        padding: 0.8rem 2rem;
        background: linear-gradient(
          135deg,
          var(--accent-green),
          var(--accent-slow)
        );
        border: none;
        border-radius: 12px;
        color: var(--bg-primary);
        font-family: "Fredoka", sans-serif;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .completion-close:hover {
        transform: scale(1.05);
      }

      /* Comparison note */
      .comparison-note {
        background: linear-gradient(
          135deg,
          rgba(6, 214, 160, 0.1),
          rgba(0, 255, 245, 0.1)
        );
        border: 1px solid var(--accent-green);
        border-radius: 12px;
        padding: 1rem;
        margin-top: 1rem;
        font-size: 0.85rem;
        color: var(--text-secondary);
      }

      .comparison-note strong {
        color: var(--accent-green);
      }

      /* Responsive */
      @media (max-width: 768px) {
        h1 {
          font-size: 1.6rem;
        }
        .node {
          width: 50px;
          height: 50px;
          font-size: 1.1rem;
        }
        .arrow {
          width: 25px;
        }
        .variables-grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .controls {
          flex-direction: column;
        }
        .phase-tab {
          min-width: 80px;
          font-size: 0.65rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-gradient"></div>
    <div class="particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>

    <div class="container">
      <header>
        <div class="logo">üéØ</div>
        <h1>Two-Pointer Technique</h1>
        <p class="subtitle">One-Pass Algorithm Visualization</p>
        <div class="badges">
          <span class="badge badge-slow">üê¢ Slow Pointer</span>
          <span class="badge badge-fast">üêá Fast Pointer</span>
          <span class="badge badge-optimal">‚ö° O(n) One Pass</span>
        </div>
      </header>

      <!-- Problem Info -->
      <div class="problem-card">
        <div class="info-box">
          <div class="info-label">Input List</div>
          <div class="info-value cyan">[1, 2, 3, 4, 5]</div>
        </div>
        <div class="info-box">
          <div class="info-label">N (from end)</div>
          <div class="info-value pink">2</div>
        </div>
        <div class="info-box">
          <div class="info-label">Gap Required</div>
          <div class="info-value yellow">n + 1 = 3</div>
        </div>
        <div class="info-box">
          <div class="info-label">Expected Output</div>
          <div class="info-value green">[1, 2, 3, 5]</div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Visualization Panel -->
        <div class="visualization-panel">
          <!-- Phase Tabs -->
          <div class="phase-tabs">
            <div class="phase-tab" id="phase1">
              <span class="phase-tab-icon">üèóÔ∏è</span>
              Setup Dummy
            </div>
            <div class="phase-tab" id="phase2">
              <span class="phase-tab-icon">üêá</span>
              Advance Fast
            </div>
            <div class="phase-tab" id="phase3">
              <span class="phase-tab-icon">üö∂</span>
              Move Together
            </div>
            <div class="phase-tab" id="phase4">
              <span class="phase-tab-icon">‚úÇÔ∏è</span>
              Remove Node
            </div>
          </div>

          <!-- Linked List Visualization -->
          <div class="list-container">
            <div class="gap-indicator" id="gapIndicator">Gap: 3 nodes</div>
            <div class="list-wrapper" id="linkedList">
              <!-- Nodes rendered here -->
            </div>
          </div>

          <!-- Step Info -->
          <div class="step-info">
            <div class="step-header">
              <span class="step-badge" id="stepBadge">Phase 1</span>
              <span class="step-counter" id="stepCounter">Step 0 / 12</span>
            </div>
            <div class="step-title" id="stepTitle">üöÄ Ready to Start</div>
            <div class="step-description" id="stepDescription">
              Click "Next Step" to begin. We'll use two pointers with a fixed
              gap to find and remove the target in a single pass!
            </div>

            <!-- Variables -->
            <div class="variables-grid">
              <div class="var-box" id="varSlow">
                <div class="var-name">slow üê¢</div>
                <div class="var-value slow" id="varSlowVal">‚Äî</div>
              </div>
              <div class="var-box" id="varFast">
                <div class="var-name">fast üêá</div>
                <div class="var-value fast" id="varFastVal">‚Äî</div>
              </div>
              <div class="var-box" id="varGap">
                <div class="var-name">gap</div>
                <div class="var-value yellow" id="varGapVal">‚Äî</div>
              </div>
              <div class="var-box" id="varI">
                <div class="var-name">i (setup)</div>
                <div class="var-value green" id="varIVal">‚Äî</div>
              </div>
            </div>

            <!-- Progress -->
            <div class="progress-bar">
              <div
                class="progress-fill"
                id="progressFill"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- Controls -->
          <div class="controls">
            <button class="btn btn-prev" id="prevBtn" disabled>‚¨ÖÔ∏è Prev</button>
            <button class="btn btn-next" id="nextBtn">Next ‚û°Ô∏è</button>
            <button class="btn btn-auto" id="autoBtn">‚ñ∂Ô∏è Auto</button>
            <button class="btn btn-reset" id="resetBtn">üîÑ Reset</button>
          </div>

          <!-- Comparison Note -->
          <div class="comparison-note">
            <strong>üí° Why Two Pointers?</strong> Unlike brute force (2 passes),
            we maintain a gap of <code>n+1</code> between pointers. When fast
            hits null, slow is exactly at the predecessor of the target!
          </div>
        </div>

        <!-- Side Panel -->
        <div class="side-panel">
          <!-- Code Panel -->
          <div class="code-panel">
            <div class="panel-header"><span>üíª</span> Algorithm Code</div>
            <div class="code-block" id="codeBlock">
              <div class="code-line" data-line="1">
                <span class="code-keyword">function</span>
                <span class="code-function">removeNthFromEnd</span>(head, n) {
              </div>
              <div class="code-line" data-line="2">
                <span class="code-comment">// Create dummy node</span>
              </div>
              <div class="code-line" data-line="3">
                <span class="code-keyword">const</span>
                <span class="code-variable">dummy</span> =
                <span class="code-keyword">new</span> ListNode(<span
                  class="code-number"
                  >0</span
                >, head);
              </div>
              <div class="code-line" data-line="4">
                <span class="code-keyword">let</span>
                <span class="code-variable">slow</span> = dummy;
              </div>
              <div class="code-line" data-line="5">
                <span class="code-keyword">let</span>
                <span class="code-variable">fast</span> = dummy;
              </div>
              <div class="code-line" data-line="6"></div>
              <div class="code-line" data-line="7">
                <span class="code-comment">// Advance fast by n+1 steps</span>
              </div>
              <div class="code-line" data-line="8">
                <span class="code-keyword">for</span> (<span
                  class="code-keyword"
                  >let</span
                >
                i = <span class="code-number">0</span>; i <= n; i++) {
              </div>
              <div class="code-line" data-line="9">fast = fast.next;</div>
              <div class="code-line" data-line="10">}</div>
              <div class="code-line" data-line="11"></div>
              <div class="code-line" data-line="12">
                <span class="code-comment"
                  >// Move both until fast is null</span
                >
              </div>
              <div class="code-line" data-line="13">
                <span class="code-keyword">while</span> (fast !==
                <span class="code-keyword">null</span>) {
              </div>
              <div class="code-line" data-line="14">slow = slow.next;</div>
              <div class="code-line" data-line="15">fast = fast.next;</div>
              <div class="code-line" data-line="16">}</div>
              <div class="code-line" data-line="17"></div>
              <div class="code-line" data-line="18">
                <span class="code-comment">// Remove target node</span>
              </div>
              <div class="code-line" data-line="19">
                slow.next = slow.next.next;
              </div>
              <div class="code-line" data-line="20"></div>
              <div class="code-line" data-line="21">
                <span class="code-keyword">return</span> dummy.next;
              </div>
              <div class="code-line" data-line="22">}</div>
            </div>
          </div>

          <!-- Legend -->
          <div class="legend-panel">
            <div class="panel-header"><span>üé®</span> Legend</div>
            <div class="legend-grid">
              <div class="legend-item">
                <div class="legend-dot slow"></div>
                <span>Slow üê¢</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot fast"></div>
                <span>Fast üêá</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot both"></div>
                <span>Both</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot target"></div>
                <span>Target</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot dummy"></div>
                <span>Dummy</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Completion Overlay -->
    <div class="completion-overlay" id="completionOverlay">
      <div class="completion-card">
        <div class="completion-emoji">üéâ</div>
        <div class="completion-title">One Pass Complete!</div>
        <p style="color: var(--text-secondary)">
          Successfully removed node 4 using the two-pointer technique!
        </p>
        <div class="completion-stats">
          <div class="stat">
            <div class="stat-value">1</div>
            <div class="stat-label">Pass</div>
          </div>
          <div class="stat">
            <div class="stat-value">O(n)</div>
            <div class="stat-label">Time</div>
          </div>
          <div class="stat">
            <div class="stat-value">O(1)</div>
            <div class="stat-label">Space</div>
          </div>
        </div>
        <p style="color: var(--text-secondary); font-size: 0.9rem">
          Result:
          <strong style="color: var(--accent-green)">[1, 2, 3, 5]</strong>
        </p>
        <button class="completion-close" id="closeCompletion">Continue</button>
      </div>
    </div>

    <script>
      // List: dummy -> 1 -> 2 -> 3 -> 4 -> 5 -> null
      // Indices: 0(dummy), 1, 2, 3, 4, 5
      const n = 2;
      let currentStep = 0;
      let isAutoPlaying = false;
      let autoInterval = null;

      // Step definitions
      const steps = [
        // Step 0: Initial
        {
          phase: 0,
          title: "üöÄ Ready to Begin",
          description:
            "We need to remove the 2nd node from the end (node 4). The two-pointer technique uses a clever gap strategy to find it in ONE pass!",
          slow: null,
          fast: null,
          gap: "‚Äî",
          i: "‚Äî",
          showDummy: false,
          showGap: false,
          target: null,
          removed: false,
          codeLines: [],
        },
        // Step 1: Create dummy
        {
          phase: 1,
          title: "üèóÔ∏è Create Dummy Node",
          description:
            "Create a sentinel/dummy node pointing to head. This handles edge cases like removing the first node. Both pointers start here.",
          slow: 0,
          fast: 0,
          gap: "0",
          i: "‚Äî",
          showDummy: true,
          showGap: false,
          target: null,
          removed: false,
          codeLines: [2, 3, 4, 5],
        },
        // Step 2-4: Advance fast
        {
          phase: 2,
          title: "üêá Advance Fast (i=0)",
          description:
            "Start advancing fast pointer. Move fast from dummy to node 1. We need n+1 = 3 total moves to create the right gap.",
          slow: 0,
          fast: 1,
          gap: "1",
          i: "0",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [7, 8, 9],
        },
        {
          phase: 2,
          title: "üêá Advance Fast (i=1)",
          description:
            "Move fast from node 1 to node 2. Gap is now 2 nodes. One more step to go!",
          slow: 0,
          fast: 2,
          gap: "2",
          i: "1",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [8, 9],
        },
        {
          phase: 2,
          title: "üêá Advance Fast (i=2)",
          description:
            "Move fast from node 2 to node 3. Gap is now 3 (n+1). The setup is complete! üéØ",
          slow: 0,
          fast: 3,
          gap: "3 ‚úì",
          i: "2",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [8, 9, 10],
        },
        // Step 5-7: Move together
        {
          phase: 3,
          title: "üö∂ Move Together (Step 1)",
          description:
            "Now move BOTH pointers together. Fast is not null, so continue. Slow: dummy‚Üí1, Fast: 3‚Üí4. Gap stays constant!",
          slow: 1,
          fast: 4,
          gap: "3",
          i: "‚Äî",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [12, 13, 14, 15],
        },
        {
          phase: 3,
          title: "üö∂ Move Together (Step 2)",
          description:
            "Continue moving both. Fast is not null. Slow: 1‚Üí2, Fast: 4‚Üí5. Getting closer!",
          slow: 2,
          fast: 5,
          gap: "3",
          i: "‚Äî",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [13, 14, 15],
        },
        {
          phase: 3,
          title: "üö∂ Move Together (Step 3)",
          description:
            "One more move. Slow: 2‚Üí3, Fast: 5‚Üínull. Fast is now NULL!",
          slow: 3,
          fast: 6,
          gap: "3",
          i: "‚Äî",
          showDummy: true,
          showGap: true,
          target: null,
          removed: false,
          codeLines: [13, 14, 15],
        },
        // Step 8: Found position
        {
          phase: 3,
          title: "üéØ Position Found!",
          description:
            "Fast is null ‚Üí exit loop. Slow (node 3) is the PREDECESSOR of our target. slow.next points to node 4 (the 2nd from end)!",
          slow: 3,
          fast: 6,
          gap: "done",
          i: "‚Äî",
          showDummy: true,
          showGap: false,
          target: 4,
          removed: false,
          codeLines: [16, 17, 18],
        },
        // Step 9: Remove
        {
          phase: 4,
          title: "‚úÇÔ∏è Remove Target Node",
          description:
            "Execute: slow.next = slow.next.next. Node 3 now points directly to node 5, bypassing node 4. The node is removed!",
          slow: 3,
          fast: 6,
          gap: "done",
          i: "‚Äî",
          showDummy: true,
          showGap: false,
          target: 4,
          removed: true,
          codeLines: [19],
        },
        // Step 10: Complete
        {
          phase: 4,
          title: "üéâ Algorithm Complete!",
          description:
            "Return dummy.next (the actual head). Final list: [1, 2, 3, 5]. We did it in ONE PASS with just two pointers!",
          slow: null,
          fast: null,
          gap: "‚Äî",
          i: "‚Äî",
          showDummy: true,
          showGap: false,
          target: null,
          removed: true,
          complete: true,
          codeLines: [21],
        },
      ];

      // DOM elements
      const linkedListEl = document.getElementById("linkedList");
      const stepTitleEl = document.getElementById("stepTitle");
      const stepDescriptionEl = document.getElementById("stepDescription");
      const stepBadgeEl = document.getElementById("stepBadge");
      const stepCounterEl = document.getElementById("stepCounter");
      const progressFillEl = document.getElementById("progressFill");
      const gapIndicatorEl = document.getElementById("gapIndicator");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const autoBtn = document.getElementById("autoBtn");
      const resetBtn = document.getElementById("resetBtn");
      const completionOverlay = document.getElementById("completionOverlay");
      const closeCompletion = document.getElementById("closeCompletion");

      const phaseTabs = [
        document.getElementById("phase1"),
        document.getElementById("phase2"),
        document.getElementById("phase3"),
        document.getElementById("phase4"),
      ];

      // Render linked list
      function renderList(stepIndex) {
        const state = steps[stepIndex];
        linkedListEl.innerHTML = "";

        // Nodes: dummy(0), 1(1), 2(2), 3(3), 4(4), 5(5), null(6)
        const nodes = state.showDummy ? ["D", 1, 2, 3, 4, 5] : [1, 2, 3, 4, 5];

        const offset = state.showDummy ? 0 : 1;

        nodes.forEach((value, idx) => {
          const actualIndex = idx + offset;

          // Skip removed node 4 in final state
          if (state.complete && actualIndex === 4) return;

          const group = document.createElement("div");
          group.className = "node-group";

          const node = document.createElement("div");
          node.className = "node";

          // Dummy node styling
          if (actualIndex === 0) {
            node.classList.add("dummy");
            node.textContent = "D";
          } else {
            node.textContent = value;
          }

          // Index label
          if (actualIndex > 0) {
            const indexLabel = document.createElement("span");
            indexLabel.className = "node-index";
            indexLabel.textContent = `${actualIndex}`;
            node.appendChild(indexLabel);
          }

          // Pointer states
          const isSlow = state.slow === actualIndex;
          const isFast = state.fast === actualIndex;
          const isTarget = state.target === actualIndex;
          const isRemoved = state.removed && actualIndex === 4;

          if (isRemoved && !state.complete) {
            node.classList.add("removed");
          } else if (isTarget) {
            node.classList.add("target");
          } else if (isSlow && isFast) {
            node.classList.add("both-pointers");
          } else if (isSlow) {
            node.classList.add("slow-only");
          } else if (isFast) {
            node.classList.add("fast-only");
          }

          // Pointer labels
          if (isSlow || isFast || isTarget) {
            const labels = document.createElement("div");
            labels.className = "pointer-labels";

            if (isSlow && !isRemoved) {
              const slowLabel = document.createElement("span");
              slowLabel.className = "pointer-label slow";
              slowLabel.textContent = "üê¢";
              labels.appendChild(slowLabel);
            }
            if (isFast && !isRemoved) {
              const fastLabel = document.createElement("span");
              fastLabel.className = "pointer-label fast";
              fastLabel.textContent = "üêá";
              labels.appendChild(fastLabel);
            }
            if (isTarget && !isSlow) {
              const targetLabel = document.createElement("span");
              targetLabel.className = "pointer-label target";
              targetLabel.textContent = "üéØ";
              labels.appendChild(targetLabel);
            }

            node.appendChild(labels);
          }

          group.appendChild(node);

          // Arrow (except last)
          const isLastNode =
            (state.complete && actualIndex === 3) ||
            (!state.complete && actualIndex === 5);
          if (!isLastNode) {
            // Skip arrow after removed node
            if (!(state.removed && actualIndex === 4)) {
              const arrow = document.createElement("div");
              arrow.className = "arrow";

              // Skip arrow (rewiring)
              if (state.removed && actualIndex === 3) {
                arrow.classList.add("skip");
              }

              group.appendChild(arrow);
            }
          }

          linkedListEl.appendChild(group);
        });

        // Null node
        const nullGroup = document.createElement("div");
        nullGroup.className = "node-group";
        const nullNode = document.createElement("div");
        nullNode.className = "null-node";
        nullNode.textContent = "null";

        // Fast at null
        if (state.fast === 6) {
          nullNode.style.borderColor = "var(--accent-fast)";
          nullNode.style.color = "var(--accent-fast)";
          const labels = document.createElement("div");
          labels.className = "pointer-labels";
          labels.style.bottom = "-30px";
          const fastLabel = document.createElement("span");
          fastLabel.className = "pointer-label fast";
          fastLabel.textContent = "üêá";
          labels.appendChild(fastLabel);
          nullNode.style.position = "relative";
          nullNode.appendChild(labels);
        }

        nullGroup.appendChild(nullNode);
        linkedListEl.appendChild(nullGroup);

        // Gap indicator
        gapIndicatorEl.classList.toggle("visible", state.showGap);
        if (state.showGap) {
          const gapVal =
            typeof state.gap === "string"
              ? state.gap
              : `Gap: ${state.gap} nodes`;
          gapIndicatorEl.textContent = `‚ÜîÔ∏è Gap: ${state.gap} nodes`;
        }
      }

      // Update variables
      function updateVariables(stepIndex) {
        const state = steps[stepIndex];

        const slowVal =
          state.slow === null ? "‚Äî" : state.slow === 0 ? "dummy" : state.slow;
        const fastVal =
          state.fast === null
            ? "‚Äî"
            : state.fast === 0
            ? "dummy"
            : state.fast === 6
            ? "null"
            : state.fast;

        document.getElementById("varSlowVal").textContent = slowVal;
        document.getElementById("varFastVal").textContent = fastVal;
        document.getElementById("varGapVal").textContent = state.gap;
        document.getElementById("varIVal").textContent = state.i;

        // Highlight changes
        document.querySelectorAll(".var-box").forEach((v) => {
          v.classList.remove("highlight-slow", "highlight-fast");
        });

        if (stepIndex > 0) {
          const prev = steps[stepIndex - 1];
          if (state.slow !== prev.slow) {
            document.getElementById("varSlow").classList.add("highlight-slow");
          }
          if (state.fast !== prev.fast) {
            document.getElementById("varFast").classList.add("highlight-fast");
          }
        }
      }

      // Update phases
      function updatePhases(stepIndex) {
        const state = steps[stepIndex];

        phaseTabs.forEach((tab, idx) => {
          tab.classList.remove("active", "completed");
          const phaseNum = idx + 1;

          if (phaseNum === state.phase) {
            tab.classList.add("active");
          } else if (phaseNum < state.phase) {
            tab.classList.add("completed");
          }
        });
      }

      // Update code highlighting
      function updateCode(stepIndex) {
        const state = steps[stepIndex];

        document.querySelectorAll(".code-line").forEach((line) => {
          line.classList.remove("active", "active-fast");
        });

        if (state.codeLines) {
          state.codeLines.forEach((lineNum) => {
            const line = document.querySelector(
              `.code-line[data-line="${lineNum}"]`
            );
            if (line) {
              line.classList.add(state.phase === 2 ? "active-fast" : "active");
            }
          });
        }
      }

      // Main render
      function render() {
        const state = steps[currentStep];

        renderList(currentStep);
        updateVariables(currentStep);
        updatePhases(currentStep);
        updateCode(currentStep);

        stepTitleEl.textContent = state.title;
        stepDescriptionEl.innerHTML = state.description.replace(
          /`([^`]+)`/g,
          "<code>$1</code>"
        );
        stepBadgeEl.textContent =
          state.phase > 0 ? `Phase ${state.phase}` : "Start";
        stepCounterEl.textContent = `Step ${currentStep} / ${steps.length - 1}`;

        const progress = (currentStep / (steps.length - 1)) * 100;
        progressFillEl.style.width = `${progress}%`;

        prevBtn.disabled = currentStep === 0;
        nextBtn.disabled = currentStep === steps.length - 1;

        if (state.complete) {
          setTimeout(() => {
            completionOverlay.classList.add("visible");
          }, 500);
        }
      }

      // Navigation
      function goToStep(step) {
        currentStep = Math.max(0, Math.min(step, steps.length - 1));
        render();
      }

      prevBtn.addEventListener("click", () => goToStep(currentStep - 1));
      nextBtn.addEventListener("click", () => goToStep(currentStep + 1));

      autoBtn.addEventListener("click", () => {
        if (isAutoPlaying) {
          clearInterval(autoInterval);
          autoBtn.innerHTML = "‚ñ∂Ô∏è Auto";
          isAutoPlaying = false;
        } else {
          if (currentStep === steps.length - 1) {
            goToStep(0);
          }
          isAutoPlaying = true;
          autoBtn.innerHTML = "‚è∏Ô∏è Pause";
          autoInterval = setInterval(() => {
            if (currentStep < steps.length - 1) {
              goToStep(currentStep + 1);
            } else {
              clearInterval(autoInterval);
              autoBtn.innerHTML = "‚ñ∂Ô∏è Auto";
              isAutoPlaying = false;
            }
          }, 1800);
        }
      });

      resetBtn.addEventListener("click", () => {
        if (isAutoPlaying) {
          clearInterval(autoInterval);
          autoBtn.innerHTML = "‚ñ∂Ô∏è Auto";
          isAutoPlaying = false;
        }
        completionOverlay.classList.remove("visible");
        goToStep(0);
      });

      closeCompletion.addEventListener("click", () => {
        completionOverlay.classList.remove("visible");
      });

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          if (currentStep < steps.length - 1) goToStep(currentStep + 1);
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          goToStep(currentStep - 1);
        } else if (e.key === "r" || e.key === "R") {
          resetBtn.click();
        } else if (e.key === "Escape") {
          completionOverlay.classList.remove("visible");
        }
      });

      // Initial render
      render();
    </script>
  </body>
</html>
