<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linked List Partition - Two Lists with Original Nodes</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Gloria+Hallelujah&family=Shadows+Into+Light&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Architects Daughter", cursive;
        background: #2c2c2c;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Cork board container */
      .corkboard {
        background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"),
          linear-gradient(
            135deg,
            #c4956a 0%,
            #b8860b 25%,
            #cd853f 50%,
            #d2a679 75%,
            #c4956a 100%
          );
        background-blend-mode: overlay;
        min-height: 100vh;
        padding: 40px;
        position: relative;
      }

      /* Wood frame */
      .wood-frame {
        position: fixed;
        background: linear-gradient(
          180deg,
          #8b4513 0%,
          #5d3a1a 30%,
          #4a2c0f 70%,
          #3d2409 100%
        );
        z-index: 1000;
      }

      .wood-frame.top {
        top: 0;
        left: 0;
        right: 0;
        height: 20px;
      }
      .wood-frame.bottom {
        bottom: 0;
        left: 0;
        right: 0;
        height: 20px;
      }
      .wood-frame.left {
        top: 0;
        left: 0;
        bottom: 0;
        width: 20px;
      }
      .wood-frame.right {
        top: 0;
        right: 0;
        bottom: 0;
        width: 20px;
      }

      /* Title card - sticky note style */
      .title-card {
        background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
        padding: 25px 40px;
        margin: 0 auto 30px;
        max-width: 800px;
        transform: rotate(-1deg);
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3),
          inset 0 -3px 10px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .title-card::before {
        content: "";
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 30px;
        background: linear-gradient(180deg, #e57373 0%, #c62828 100%);
        border-radius: 3px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
      }

      .title {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 36px;
        color: #1a237e;
        text-align: center;
        margin-bottom: 8px;
      }

      .subtitle {
        font-family: "Shadows Into Light", cursive;
        font-size: 20px;
        color: #5d4037;
        text-align: center;
      }

      /* Main content */
      .content {
        max-width: 1250px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Index card style steps */
      .step {
        background: linear-gradient(180deg, #ffffff 0%, #f5f5f5 100%);
        margin-bottom: 35px;
        padding: 30px;
        border-radius: 5px;
        position: relative;
        box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.25),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        opacity: 0;
        transform: translateY(30px) rotate(0.5deg);
        transition: all 0.5s ease;
        border-top: 4px solid #1976d2;
      }

      .step:nth-child(even) {
        transform: translateY(30px) rotate(-0.5deg);
      }

      .step.visible {
        opacity: 1;
        transform: translateY(0) rotate(0.5deg);
      }

      .step:nth-child(even).visible {
        transform: translateY(0) rotate(-0.5deg);
      }

      /* Push pin */
      .push-pin {
        position: absolute;
        top: -12px;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4),
          inset -2px -2px 5px rgba(0, 0, 0, 0.2),
          inset 2px 2px 5px rgba(255, 255, 255, 0.3);
      }

      .push-pin.red {
        left: 30px;
        background: radial-gradient(circle at 30% 30%, #ff6b6b, #c0392b);
      }

      .push-pin.blue {
        right: 30px;
        background: radial-gradient(circle at 30% 30%, #64b5f6, #1565c0);
      }

      .push-pin.green {
        left: 50%;
        transform: translateX(-50%);
        background: radial-gradient(circle at 30% 30%, #81c784, #2e7d32);
      }

      .step-number {
        position: absolute;
        left: -15px;
        top: 30px;
        width: 45px;
        height: 45px;
        background: linear-gradient(135deg, #ff7043, #e64a19);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: "Gloria Hallelujah", cursive;
        font-size: 24px;
        font-weight: bold;
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3);
      }

      .step-title {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 26px;
        color: #1565c0;
        margin-bottom: 18px;
        padding-bottom: 10px;
        border-bottom: 3px dashed #bbdefb;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .step-title .icon {
        font-size: 28px;
      }

      /* Lined paper effect */
      .lined-content {
        background: repeating-linear-gradient(
          transparent,
          transparent 27px,
          #e3f2fd 27px,
          #e3f2fd 28px
        );
        padding: 5px 0;
      }

      .step-description {
        font-family: "Architects Daughter", cursive;
        font-size: 18px;
        color: #37474f;
        line-height: 1.8;
        margin: 15px 0;
      }

      /* Node visualization */
      .node-container {
        margin: 20px 0;
        padding: 15px;
        background: rgba(227, 242, 253, 0.5);
        border-radius: 10px;
        border: 2px dashed #90caf9;
      }

      .list-label {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 18px;
        color: #5d4037;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .linked-list {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
        padding: 10px 0;
      }

      .node {
        display: flex;
        align-items: center;
      }

      .node-box {
        width: 65px;
        height: 65px;
        border: 4px solid #37474f;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: "Gloria Hallelujah", cursive;
        font-size: 28px;
        font-weight: bold;
        background: white;
        position: relative;
        transition: all 0.4s ease;
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
      }

      .node-box .val {
        font-size: 28px;
        color: #1a237e;
      }

      .node-box .next-indicator {
        font-size: 10px;
        color: #78909c;
        position: absolute;
        bottom: 2px;
        right: 5px;
      }

      .node-box.before-node {
        background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
        border-color: #43a047;
        box-shadow: 4px 4px 0 rgba(67, 160, 71, 0.3);
      }

      .node-box.after-node {
        background: linear-gradient(135deg, #ffe0b2 0%, #ffcc80 100%);
        border-color: #fb8c00;
        box-shadow: 4px 4px 0 rgba(251, 140, 0, 0.3);
      }

      .node-box.dummy-node {
        background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%);
        border-color: #757575;
        border-style: dashed;
        width: 50px;
        height: 50px;
        font-size: 14px;
      }

      .node-box.current-node {
        transform: scale(1.15);
        box-shadow: 0 0 0 4px #e91e63, 8px 8px 0 rgba(0, 0, 0, 0.2);
        animation: pulse-current 1.5s infinite;
      }

      @keyframes pulse-current {
        0%,
        100% {
          box-shadow: 0 0 0 4px #e91e63, 8px 8px 0 rgba(0, 0, 0, 0.2);
        }
        50% {
          box-shadow: 0 0 0 8px rgba(233, 30, 99, 0.4),
            8px 8px 0 rgba(0, 0, 0, 0.2);
        }
      }

      .node-box.disconnected {
        opacity: 0.5;
        border-style: dotted;
      }

      .arrow {
        font-size: 28px;
        color: #37474f;
        margin: 0 5px;
        font-family: "Gloria Hallelujah", cursive;
      }

      .arrow.green {
        color: #43a047;
      }
      .arrow.orange {
        color: #fb8c00;
      }
      .arrow.red {
        color: #e91e63;
      }
      .arrow.dashed {
        position: relative;
      }

      .arrow.dashed::after {
        content: "- -";
        font-size: 16px;
        letter-spacing: -3px;
      }

      .null-box {
        font-family: "Architects Daughter", cursive;
        font-size: 16px;
        color: #78909c;
        padding: 12px 18px;
        background: #f5f5f5;
        border-radius: 8px;
        border: 2px dashed #bdbdbd;
      }

      /* Memory address style */
      .memory-viz {
        display: flex;
        gap: 25px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .memory-block {
        background: white;
        border: 3px solid #455a64;
        border-radius: 10px;
        padding: 15px 20px;
        min-width: 200px;
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.15);
      }

      .memory-block.before {
        border-color: #43a047;
        background: linear-gradient(180deg, #ffffff 0%, #e8f5e9 100%);
      }

      .memory-block.after {
        border-color: #fb8c00;
        background: linear-gradient(180deg, #ffffff 0%, #fff3e0 100%);
      }

      .memory-label {
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        color: #78909c;
        margin-bottom: 5px;
      }

      .memory-value {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 22px;
        font-weight: bold;
      }

      .memory-value.green {
        color: #2e7d32;
      }
      .memory-value.orange {
        color: #e65100;
      }
      .memory-value.pink {
        color: #c2185b;
      }
      .memory-value.blue {
        color: #1565c0;
      }

      /* Two columns layout */
      .two-columns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        margin: 20px 0;
      }

      .column {
        background: rgba(255, 255, 255, 0.7);
        border-radius: 15px;
        padding: 20px;
        border: 3px solid #e0e0e0;
      }

      .column.before-col {
        border-color: #81c784;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(200, 230, 201, 0.5) 100%
        );
      }

      .column.after-col {
        border-color: #ffb74d;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(255, 224, 178, 0.5) 100%
        );
      }

      .column-title {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 22px;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 3px solid;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .column.before-col .column-title {
        color: #2e7d32;
        border-color: #81c784;
      }

      .column.after-col .column-title {
        color: #e65100;
        border-color: #ffb74d;
      }

      /* Comparison badge */
      .comparison-badge {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        background: white;
        padding: 12px 25px;
        border-radius: 30px;
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.15);
        margin: 15px 0;
        border: 3px solid #90caf9;
      }

      .comparison-num {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 32px;
        font-weight: bold;
        color: #1a237e;
      }

      .comparison-op {
        font-family: "Architects Daughter", cursive;
        font-size: 22px;
        color: #78909c;
      }

      .comparison-x {
        background: #e91e63;
        color: white;
        padding: 8px 18px;
        border-radius: 8px;
        font-family: "Gloria Hallelujah", cursive;
        font-size: 26px;
        font-weight: bold;
      }

      .comparison-result {
        font-family: "Architects Daughter", cursive;
        font-size: 20px;
        padding: 8px 18px;
        border-radius: 20px;
        font-weight: bold;
      }

      .comparison-result.yes {
        background: #c8e6c9;
        color: #2e7d32;
        border: 2px solid #43a047;
      }

      .comparison-result.no {
        background: #ffe0b2;
        color: #e65100;
        border: 2px solid #fb8c00;
      }

      /* Info box */
      .info-box {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        border-left: 6px solid #1976d2;
        padding: 18px 25px;
        border-radius: 0 12px 12px 0;
        margin: 20px 0;
        position: relative;
      }

      .info-box::before {
        content: "üí°";
        position: absolute;
        left: -20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 28px;
        background: white;
        border-radius: 50%;
        padding: 5px;
      }

      .info-box p {
        font-family: "Architects Daughter", cursive;
        font-size: 17px;
        color: #1a237e;
        line-height: 1.7;
      }

      /* Warning box */
      .warning-box {
        background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        border-left: 6px solid #e53935;
        padding: 18px 25px;
        border-radius: 0 12px 12px 0;
        margin: 20px 0;
        position: relative;
      }

      .warning-box::before {
        content: "‚ö†Ô∏è";
        position: absolute;
        left: -20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 28px;
        background: white;
        border-radius: 50%;
        padding: 5px;
      }

      .warning-box p {
        font-family: "Architects Daughter", cursive;
        font-size: 17px;
        color: #b71c1c;
        line-height: 1.7;
      }

      /* Code snippet */
      .code-snippet {
        background: #263238;
        border-radius: 12px;
        padding: 20px 25px;
        margin: 20px 0;
        overflow-x: auto;
        box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
        position: relative;
      }

      .code-snippet::before {
        content: "< / >";
        position: absolute;
        top: -12px;
        left: 20px;
        background: #ff7043;
        color: white;
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        padding: 4px 15px;
        border-radius: 5px;
      }

      .code-snippet code {
        font-family: "Courier New", monospace;
        font-size: 14px;
        color: #eceff1;
        line-height: 1.8;
      }

      .code-keyword {
        color: #f48fb1;
      }
      .code-var {
        color: #80deea;
      }
      .code-comment {
        color: #78909c;
        font-style: italic;
      }
      .code-string {
        color: #c5e1a5;
      }

      /* Pointer arrow visualization */
      .pointer-action {
        display: flex;
        align-items: center;
        gap: 15px;
        margin: 15px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 10px;
        border: 2px solid #e0e0e0;
      }

      .pointer-action .label {
        font-family: "Architects Daughter", cursive;
        font-size: 16px;
        color: #455a64;
        min-width: 150px;
      }

      .pointer-action .visual {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Gloria Hallelujah", cursive;
        font-size: 20px;
      }

      .pointer-box {
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: bold;
      }

      .pointer-box.before {
        background: #c8e6c9;
        color: #2e7d32;
      }
      .pointer-box.after {
        background: #ffe0b2;
        color: #e65100;
      }
      .pointer-box.node {
        background: #e3f2fd;
        color: #1565c0;
      }

      /* Final result card */
      .result-card {
        background: linear-gradient(
          135deg,
          #e8f5e9 0%,
          #c8e6c9 50%,
          #a5d6a7 100%
        );
        padding: 30px;
        border-radius: 20px;
        margin: 25px 0;
        border: 4px solid #43a047;
        box-shadow: 8px 8px 0 rgba(67, 160, 71, 0.3);
      }

      .result-card .label {
        font-family: "Architects Daughter", cursive;
        font-size: 18px;
        color: #2e7d32;
        margin-bottom: 12px;
      }

      .result-card .value {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 32px;
        color: #1b5e20;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .result-card .checkmark {
        font-size: 36px;
      }

      /* Complexity cards */
      .complexity-cards {
        display: flex;
        gap: 25px;
        margin: 25px 0;
        flex-wrap: wrap;
      }

      .complexity-card {
        background: white;
        padding: 25px 30px;
        border-radius: 15px;
        border: 4px solid;
        box-shadow: 6px 6px 0;
        flex: 1;
        min-width: 200px;
      }

      .complexity-card.time {
        border-color: #1976d2;
        box-shadow: 6px 6px 0 rgba(25, 118, 210, 0.3);
      }

      .complexity-card.space {
        border-color: #43a047;
        box-shadow: 6px 6px 0 rgba(67, 160, 71, 0.3);
      }

      .complexity-card .type {
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        color: #78909c;
        margin-bottom: 5px;
      }

      .complexity-card .value {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 42px;
        font-weight: bold;
      }

      .complexity-card.time .value {
        color: #1565c0;
      }
      .complexity-card.space .value {
        color: #2e7d32;
      }

      .complexity-card .note {
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        color: #9e9e9e;
        margin-top: 8px;
      }

      /* Progress bar */
      .progress-container {
        position: fixed;
        top: 30px;
        right: 30px;
        background: white;
        padding: 18px 25px;
        border-radius: 15px;
        box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.25);
        z-index: 1001;
        border: 3px solid #e0e0e0;
      }

      .progress-label {
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        color: #78909c;
        margin-bottom: 8px;
      }

      .progress-bar {
        width: 150px;
        height: 12px;
        background: #e0e0e0;
        border-radius: 6px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #43a047, #1976d2, #e91e63);
        border-radius: 6px;
        transition: width 0.4s ease;
      }

      .progress-text {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 18px;
        color: #37474f;
        margin-top: 8px;
        text-align: center;
      }

      /* Controls */
      .controls {
        position: fixed;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 15px;
        background: white;
        padding: 15px 30px;
        border-radius: 50px;
        box-shadow: 5px 5px 25px rgba(0, 0, 0, 0.3);
        z-index: 1001;
        border: 3px solid #e0e0e0;
      }

      .control-btn {
        font-family: "Architects Daughter", cursive;
        font-size: 18px;
        padding: 12px 28px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .control-btn.primary {
        background: linear-gradient(135deg, #43a047, #2e7d32);
        color: white;
        box-shadow: 0 4px 15px rgba(67, 160, 71, 0.4);
      }

      .control-btn.secondary {
        background: #f5f5f5;
        color: #455a64;
        border: 2px solid #e0e0e0;
      }

      .control-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .control-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      /* Legend */
      .legend {
        display: flex;
        gap: 25px;
        flex-wrap: wrap;
        background: white;
        padding: 20px 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 4px 4px 15px rgba(0, 0, 0, 0.15);
        border: 3px solid #e0e0e0;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Architects Daughter", cursive;
        font-size: 16px;
        color: #455a64;
      }

      .legend-color {
        width: 35px;
        height: 35px;
        border-radius: 8px;
        border: 3px solid;
      }

      .legend-color.green {
        background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
        border-color: #43a047;
      }

      .legend-color.orange {
        background: linear-gradient(135deg, #ffe0b2, #ffcc80);
        border-color: #fb8c00;
      }

      .legend-color.pink {
        background: #fce4ec;
        border-color: #e91e63;
      }

      .legend-color.gray {
        background: #e0e0e0;
        border-color: #757575;
        border-style: dashed;
      }

      /* Input display */
      .input-card {
        background: linear-gradient(135deg, #ede7f6 0%, #d1c4e9 100%);
        padding: 25px 35px;
        border-radius: 15px;
        margin-bottom: 30px;
        border: 4px solid #7e57c2;
        box-shadow: 6px 6px 0 rgba(126, 87, 194, 0.3);
      }

      .input-row {
        display: flex;
        gap: 50px;
        flex-wrap: wrap;
      }

      .input-item .label {
        font-family: "Architects Daughter", cursive;
        font-size: 14px;
        color: #5e35b1;
        margin-bottom: 5px;
      }

      .input-item .value {
        font-family: "Gloria Hallelujah", cursive;
        font-size: 28px;
        color: #311b92;
      }

      /* Animation for node movement */
      @keyframes node-move {
        0% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0);
        }
      }

      .node-moving {
        animation: node-move 0.5s ease;
      }

      /* Responsive */
      @media (max-width: 900px) {
        .two-columns {
          grid-template-columns: 1fr;
        }

        .input-row {
          flex-direction: column;
          gap: 20px;
        }
      }

      /* Handwritten annotation */
      .annotation {
        font-family: "Shadows Into Light", cursive;
        font-size: 18px;
        color: #e91e63;
        transform: rotate(-3deg);
        display: inline-block;
        margin: 10px 0;
      }

      .annotation.arrow-down::after {
        content: " ‚Üì";
        font-size: 22px;
      }

      /* Dry run table */
      .dry-run-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 4px 4px 15px rgba(0, 0, 0, 0.1);
      }

      .dry-run-table th {
        background: #1976d2;
        color: white;
        font-family: "Architects Daughter", cursive;
        font-size: 16px;
        padding: 15px;
        text-align: left;
      }

      .dry-run-table td {
        font-family: "Architects Daughter", cursive;
        font-size: 15px;
        padding: 12px 15px;
        border-bottom: 2px solid #e0e0e0;
        color: #37474f;
      }

      .dry-run-table tr:nth-child(even) {
        background: #fafafa;
      }

      .action-tag {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 14px;
        font-weight: bold;
      }

      .action-tag.before {
        background: #c8e6c9;
        color: #2e7d32;
      }

      .action-tag.after {
        background: #ffe0b2;
        color: #e65100;
      }
    </style>
  </head>
  <body>
    <div class="wood-frame top"></div>
    <div class="wood-frame bottom"></div>
    <div class="wood-frame left"></div>
    <div class="wood-frame right"></div>

    <div class="corkboard">
      <!-- Title Card -->
      <div class="title-card">
        <h1 class="title">üîó Two Lists with Original Nodes</h1>
        <p class="subtitle">
          Reusing nodes by pointer manipulation ‚Ä¢ O(n) time ‚Ä¢ O(1) space
        </p>
      </div>

      <!-- Progress -->
      <div class="progress-container">
        <div class="progress-label">Progress</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-text" id="progressText">Step 0 / 9</div>
      </div>

      <div class="content">
        <!-- Input Card -->
        <div class="input-card">
          <div class="input-row">
            <div class="input-item">
              <div class="label">INPUT LINKED LIST</div>
              <div class="value">head = [1, 4, 3, 2, 5, 2]</div>
            </div>
            <div class="input-item">
              <div class="label">PARTITION VALUE</div>
              <div class="value">x = 3</div>
            </div>
          </div>
        </div>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color green"></div>
            <span>"Before" list (val &lt; x)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color orange"></div>
            <span>"After" list (val ‚â• x)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color pink"></div>
            <span>Current node</span>
          </div>
          <div class="legend-item">
            <div class="legend-color gray"></div>
            <span>Dummy node</span>
          </div>
        </div>

        <!-- Step 0: Key Concept -->
        <div class="step visible" id="step0">
          <div class="push-pin red"></div>
          <div class="push-pin blue"></div>
          <div class="step-number">0</div>
          <div class="step-title">
            <span class="icon">üéØ</span>
            Key Concept: Reuse Original Nodes!
          </div>

          <div class="step-description">
            Unlike brute force (which creates new nodes), we'll
            <strong>move the actual nodes</strong> by changing their
            <code>next</code> pointers. Think of it as physically moving cards
            between two piles!
          </div>

          <div class="node-container">
            <div class="list-label">üìç Original Linked List in Memory:</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box">
                  <span class="val">1</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box">
                  <span class="val">4</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box">
                  <span class="val">3</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box">
                  <span class="val">2</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box">
                  <span class="val">5</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box">
                  <span class="val">2</span>
                  <span class="next-indicator">.next‚Üí</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>

          <div class="info-box">
            <p>
              <strong>The Plan:</strong> Create two dummy-headed lists. As we
              traverse, we'll "unhook" each node from its current position and
              "hook" it to the appropriate list's tail. No new nodes created!
            </p>
          </div>

          <div class="code-snippet">
            <code>
              <span class="code-comment"
                >// We'll maintain these pointers:</span
              >
              <span class="code-var">beforeDummy</span> ‚Üí head of "less than"
              list <span class="code-var">before</span> ‚Üí tail of "less than"
              list (where we append) <span class="code-var">afterDummy</span> ‚Üí
              head of "greater or equal" list
              <span class="code-var">after</span> ‚Üí tail of "greater or equal"
              list (where we append)
            </code>
          </div>
        </div>

        <!-- Step 1: Initialize -->
        <div class="step" id="step1">
          <div class="push-pin green"></div>
          <div class="step-number">1</div>
          <div class="step-title">
            <span class="icon">üöÄ</span>
            Initialize: Create Dummy Nodes
          </div>

          <div class="step-description">
            Create two dummy nodes. These act as anchors - we never move them,
            just append real nodes after them.
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title">
                <span>üü¢</span> Before List (values &lt; 3)
              </div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
              <div class="memory-viz">
                <div class="memory-block before">
                  <div class="memory-label">beforeDummy</div>
                  <div class="memory-value green">‚Üí Dummy</div>
                </div>
                <div class="memory-block before">
                  <div class="memory-label">before (tail)</div>
                  <div class="memory-value green">‚Üí Dummy</div>
                </div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title">
                <span>üü†</span> After List (values ‚â• 3)
              </div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
              <div class="memory-viz">
                <div class="memory-block after">
                  <div class="memory-label">afterDummy</div>
                  <div class="memory-value orange">‚Üí Dummy</div>
                </div>
                <div class="memory-block after">
                  <div class="memory-label">after (tail)</div>
                  <div class="memory-value orange">‚Üí Dummy</div>
                </div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">üìç Original List (current = head):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">1</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">4</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">3</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">5</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
            <div class="annotation arrow-down">current points here</div>
          </div>
        </div>

        <!-- Step 2: Process Node 1 -->
        <div class="step" id="step2">
          <div class="push-pin red"></div>
          <div class="push-pin blue"></div>
          <div class="step-number">2</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Node 1: Move to Before List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">1</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result yes">YES ‚úì</span>
          </div>

          <div class="step-description">
            Node 1 goes to the Before list. We save
            <code>current.next</code> first, then physically move the node.
          </div>

          <div class="pointer-action">
            <span class="label">1. Save next:</span>
            <div class="visual">
              <span class="pointer-box node">nextNode</span>
              <span>=</span>
              <span class="pointer-box node">Node(4)</span>
            </div>
          </div>

          <div class="pointer-action">
            <span class="label">2. Disconnect:</span>
            <div class="visual">
              <span class="pointer-box node">current.next</span>
              <span>=</span>
              <span class="pointer-box">null</span>
            </div>
          </div>

          <div class="pointer-action">
            <span class="label">3. Append to before:</span>
            <div class="visual">
              <span class="pointer-box before">before.next</span>
              <span>=</span>
              <span class="pointer-box node">Node(1)</span>
            </div>
          </div>

          <div class="pointer-action">
            <span class="label">4. Advance tail:</span>
            <div class="visual">
              <span class="pointer-box before">before</span>
              <span>=</span>
              <span class="pointer-box node">Node(1)</span>
            </div>
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title"><span>üü¢</span> Before List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node node-moving">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title"><span>üü†</span> After List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">
              üìç Move to next node (current = nextNode):
            </div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">4</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">3</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">5</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>
        </div>

        <!-- Step 3: Process Node 4 -->
        <div class="step" id="step3">
          <div class="push-pin green"></div>
          <div class="step-number">3</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Node 4: Move to After List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">4</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result no">NO ‚úó</span>
          </div>

          <div class="step-description">
            4 ‚â• 3, so this node goes to the After list. Same process: save next,
            disconnect, append, advance.
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title"><span>üü¢</span> Before List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title"><span>üü†</span> After List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node node-moving">
                    <span class="val">4</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">üìç Remaining (current = Node 3):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">3</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">5</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>
        </div>

        <!-- Step 4: Process Node 3 -->
        <div class="step" id="step4">
          <div class="push-pin red"></div>
          <div class="push-pin blue"></div>
          <div class="step-number">4</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Node 3: Move to After List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">3</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result no">NO ‚úó</span>
          </div>

          <div class="warning-box">
            <p>
              <strong>Watch out!</strong> 3 is NOT less than 3 (it's equal!). So
              it goes to the After list, not Before. This is a common mistake!
            </p>
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title"><span>üü¢</span> Before List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title"><span>üü†</span> After List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">4</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node node-moving">
                    <span class="val">3</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">üìç Remaining (current = Node 2):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">5</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>
        </div>

        <!-- Step 5: Process Node 2 -->
        <div class="step" id="step5">
          <div class="push-pin green"></div>
          <div class="step-number">5</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Node 2: Move to Before List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">2</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result yes">YES ‚úì</span>
          </div>

          <div class="step-description">
            2 &lt; 3, so append to Before list. Notice: relative order
            preserved! 2 comes after 1.
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title"><span>üü¢</span> Before List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node node-moving">
                    <span class="val">2</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title"><span>üü†</span> After List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">4</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">3</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">üìç Remaining (current = Node 5):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">5</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>
        </div>

        <!-- Step 6: Process Node 5 -->
        <div class="step" id="step6">
          <div class="push-pin red"></div>
          <div class="push-pin blue"></div>
          <div class="step-number">6</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Node 5: Move to After List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">5</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result no">NO ‚úó</span>
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title"><span>üü¢</span> Before List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">2</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title"><span>üü†</span> After List</div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">4</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">3</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node node-moving">
                    <span class="val">5</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">
              üìç Remaining (current = Node 2, the last one!):
            </div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box current-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>
        </div>

        <!-- Step 7: Process Last Node 2 -->
        <div class="step" id="step7">
          <div class="push-pin green"></div>
          <div class="step-number">7</div>
          <div class="step-title">
            <span class="icon">‚úÇÔ∏è</span>
            Process Last Node 2: Move to Before List
          </div>

          <div class="comparison-badge">
            <span class="comparison-num">2</span>
            <span class="comparison-op">&lt;</span>
            <span class="comparison-x">x = 3</span>
            <span class="comparison-op">?</span>
            <span class="comparison-result yes">YES ‚úì</span>
          </div>

          <div class="step-description">
            Last node! After this, <code>current</code> becomes
            <code>null</code> and we exit the loop.
          </div>

          <div class="two-columns">
            <div class="column before-col">
              <div class="column-title">
                <span>üü¢</span> Before List (Complete!)
              </div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">1</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node">
                    <span class="val">2</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box before-node node-moving">
                    <span class="val">2</span>
                  </div>
                  <span class="arrow green">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
              <div class="memory-viz">
                <div class="memory-block before">
                  <div class="memory-label">before (tail)</div>
                  <div class="memory-value green">‚Üí Node(2)</div>
                </div>
              </div>
            </div>

            <div class="column after-col">
              <div class="column-title">
                <span>üü†</span> After List (Complete!)
              </div>
              <div class="linked-list">
                <div class="node">
                  <div class="node-box dummy-node">D</div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">4</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">3</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="node">
                  <div class="node-box after-node">
                    <span class="val">5</span>
                  </div>
                  <span class="arrow orange">‚Üí</span>
                </div>
                <div class="null-box">null</div>
              </div>
              <div class="memory-viz">
                <div class="memory-block after">
                  <div class="memory-label">after (tail)</div>
                  <div class="memory-value orange">‚Üí Node(5)</div>
                </div>
              </div>
            </div>
          </div>

          <div class="info-box">
            <p>
              All nodes processed! Now we need to <strong>connect</strong> the
              two lists. But first, a critical safety step...
            </p>
          </div>
        </div>

        <!-- Step 8: Connect Lists -->
        <div class="step" id="step8">
          <div class="push-pin red"></div>
          <div class="push-pin blue"></div>
          <div class="step-number">8</div>
          <div class="step-title">
            <span class="icon">üîó</span>
            Connect the Two Lists
          </div>

          <div class="warning-box">
            <p>
              <strong>CRITICAL STEP 1:</strong> Set
              <code>after.next = null</code> first! Without this, the last node
              might still point somewhere in the Before list, creating a CYCLE!
            </p>
          </div>

          <div class="code-snippet">
            <code>
              <span class="code-comment"
                >// MUST do this first to prevent cycles!</span
              >
              <span class="code-var">after</span>.next =
              <span class="code-keyword">null</span>

              <span class="code-comment"
                >// Connect before's tail to after's first real node</span
              >
              <span class="code-var">before</span>.next =
              <span class="code-var">afterDummy</span>.next

              <span class="code-comment"
                >// Return the first real node (skip dummy)</span
              >
              <span class="code-keyword">return</span>
              <span class="code-var">beforeDummy</span>.next
            </code>
          </div>

          <div class="node-container">
            <div class="list-label">
              Step 1: Terminate After List (after.next = null):
            </div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box dummy-node">D</div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">4</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">3</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node current-node">
                  <span class="val">5</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div
                class="null-box"
                style="background: #c8e6c9; border-color: #43a047"
              >
                null ‚Üê Set here!
              </div>
            </div>
          </div>

          <div class="node-container">
            <div class="list-label">
              Step 2: Connect before.next ‚Üí afterDummy.next:
            </div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box dummy-node">D</div>
                <span class="arrow green">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">1</span>
                </div>
                <span class="arrow green">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow green">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow red" style="font-size: 36px">‚üπ</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">4</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">3</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">5</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
            <div class="annotation" style="margin-left: 70px">
              ‚Üë Return this (beforeDummy.next)
            </div>
          </div>
        </div>

        <!-- Step 9: Final Result -->
        <div class="step" id="step9">
          <div class="push-pin green"></div>
          <div class="step-number">9</div>
          <div class="step-title">
            <span class="icon">üéâ</span>
            Final Result - Success!
          </div>

          <div class="node-container">
            <div class="list-label">üìç BEFORE (Original):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box"><span class="val">1</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">4</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">3</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">5</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box"><span class="val">2</span></div>
                <span class="arrow">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>

          <div
            class="node-container"
            style="background: rgba(200, 230, 201, 0.5); border-color: #81c784"
          >
            <div class="list-label">‚úÖ AFTER (Partitioned around x=3):</div>
            <div class="linked-list">
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">1</span>
                </div>
                <span class="arrow green">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow green">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box before-node">
                  <span class="val">2</span>
                </div>
                <span class="arrow red">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">4</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">3</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="node">
                <div class="node-box after-node">
                  <span class="val">5</span>
                </div>
                <span class="arrow orange">‚Üí</span>
              </div>
              <div class="null-box">null</div>
            </div>
          </div>

          <div class="result-card">
            <div class="label">OUTPUT</div>
            <div class="value">
              <span class="checkmark">‚úì</span>
              [1, 2, 2, 4, 3, 5]
            </div>
            <p style="margin-top: 12px; font-size: 18px; color: #2e7d32">
              All values &lt; 3 first ‚Ä¢ Relative order preserved ‚Ä¢ Same nodes
              reused!
            </p>
          </div>

          <div class="complexity-cards">
            <div class="complexity-card time">
              <div class="type">TIME COMPLEXITY</div>
              <div class="value">O(n)</div>
              <div class="note">Single pass through n nodes</div>
            </div>
            <div class="complexity-card space">
              <div class="type">SPACE COMPLEXITY</div>
              <div class="value">O(1)</div>
              <div class="note">
                Only 4 pointers - no matter the input size!
              </div>
            </div>
          </div>

          <table class="dry-run-table">
            <thead>
              <tr>
                <th>Node</th>
                <th>Comparison</th>
                <th>Action</th>
                <th>Before List</th>
                <th>After List</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>1</strong></td>
                <td>1 &lt; 3 ‚úì</td>
                <td><span class="action-tag before">‚Üí Before</span></td>
                <td>D‚Üí1</td>
                <td>D</td>
              </tr>
              <tr>
                <td><strong>4</strong></td>
                <td>4 &lt; 3 ‚úó</td>
                <td><span class="action-tag after">‚Üí After</span></td>
                <td>D‚Üí1</td>
                <td>D‚Üí4</td>
              </tr>
              <tr>
                <td><strong>3</strong></td>
                <td>3 &lt; 3 ‚úó</td>
                <td><span class="action-tag after">‚Üí After</span></td>
                <td>D‚Üí1</td>
                <td>D‚Üí4‚Üí3</td>
              </tr>
              <tr>
                <td><strong>2</strong></td>
                <td>2 &lt; 3 ‚úì</td>
                <td><span class="action-tag before">‚Üí Before</span></td>
                <td>D‚Üí1‚Üí2</td>
                <td>D‚Üí4‚Üí3</td>
              </tr>
              <tr>
                <td><strong>5</strong></td>
                <td>5 &lt; 3 ‚úó</td>
                <td><span class="action-tag after">‚Üí After</span></td>
                <td>D‚Üí1‚Üí2</td>
                <td>D‚Üí4‚Üí3‚Üí5</td>
              </tr>
              <tr>
                <td><strong>2</strong></td>
                <td>2 &lt; 3 ‚úì</td>
                <td><span class="action-tag before">‚Üí Before</span></td>
                <td>D‚Üí1‚Üí2‚Üí2</td>
                <td>D‚Üí4‚Üí3‚Üí5</td>
              </tr>
              <tr style="background: #e8f5e9">
                <td colspan="3">
                  <strong>Connect:</strong> before.next = afterDummy.next
                </td>
                <td colspan="2">D‚Üí1‚Üí2‚Üí2‚Üí4‚Üí3‚Üí5‚Üínull</td>
              </tr>
            </tbody>
          </table>

          <div
            class="info-box"
            style="
              border-color: #43a047;
              background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            "
          >
            <p><strong>Why This Approach is Optimal:</strong></p>
            <ul style="margin-left: 25px; margin-top: 10px; line-height: 2">
              <li>‚úÖ No new nodes created - we reused all 6 original nodes</li>
              <li>
                ‚úÖ Constant extra space - just 4 pointers (2 dummies + 2 tails)
              </li>
              <li>‚úÖ Single traversal - each node visited exactly once</li>
              <li>‚úÖ Relative order preserved - by always appending to tail</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <button
          class="control-btn secondary"
          id="prevBtn"
          onclick="prevStep()"
          disabled
        >
          ‚Üê Previous
        </button>
        <button class="control-btn primary" id="nextBtn" onclick="nextStep()">
          Next Step ‚Üí
        </button>
        <button class="control-btn secondary" onclick="resetSteps()">
          ‚Ü∫ Reset
        </button>
      </div>
    </div>

    <script>
      let currentStep = 0;
      const totalSteps = 10;

      function updateProgress() {
        const progressFill = document.getElementById("progressFill");
        const progressText = document.getElementById("progressText");
        const percentage = (currentStep / (totalSteps - 1)) * 100;
        progressFill.style.width = percentage + "%";
        progressText.textContent = `Step ${currentStep} / ${totalSteps - 1}`;
      }

      function showStep(stepNum) {
        for (let i = 0; i < totalSteps; i++) {
          const step = document.getElementById("step" + i);
          if (step) {
            step.classList.remove("visible");
          }
        }

        for (let i = 0; i <= stepNum; i++) {
          const step = document.getElementById("step" + i);
          if (step) {
            setTimeout(() => {
              step.classList.add("visible");
            }, i * 100);
          }
        }

        document.getElementById("prevBtn").disabled = stepNum === 0;
        document.getElementById("nextBtn").disabled =
          stepNum === totalSteps - 1;

        const currentStepEl = document.getElementById("step" + stepNum);
        if (currentStepEl) {
          setTimeout(() => {
            currentStepEl.scrollIntoView({
              behavior: "smooth",
              block: "center",
            });
          }, 350);
        }

        updateProgress();
      }

      function nextStep() {
        if (currentStep < totalSteps - 1) {
          currentStep++;
          showStep(currentStep);
        }
      }

      function prevStep() {
        if (currentStep > 0) {
          currentStep--;
          showStep(currentStep);
        }
      }

      function resetSteps() {
        currentStep = 0;
        showStep(currentStep);
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      document.addEventListener("DOMContentLoaded", function () {
        showStep(0);
      });

      document.addEventListener("keydown", function (e) {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          nextStep();
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          prevStep();
        } else if (e.key === "r" || e.key === "R") {
          resetSteps();
        }
      });
    </script>
  </body>
</html>
